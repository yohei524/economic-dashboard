{% extends "base.html" %}

{% block title %}ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ | çµŒæ¸ˆæŒ‡æ¨™ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰{% endblock %}

{% block content %}
<div class="space-y-8">
    <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼šæ¬¡å›NFPã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ -->
    {% if next_nfp %}
    <div class="glass-card rounded-3xl p-8 shadow-lg overflow-hidden relative">
        <div class="absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-pop-pink/20 to-pop-purple/20 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"></div>
        <div class="relative">
            <div class="flex flex-col md:flex-row items-center justify-between gap-6">
                <div>
                    <p class="text-pop-purple font-bold text-sm tracking-wider mb-2">ğŸ“Š NEXT NFP</p>
                    <h1 class="text-4xl md:text-5xl font-black text-gray-800">{{ next_nfp.date }}</h1>
                    <p class="text-gray-500 mt-2 text-lg">22:30 JST ç™ºè¡¨</p>
                </div>
                <div class="text-center bg-gradient-to-br from-pop-purple to-pop-pink rounded-2xl p-6 text-white shadow-lg">
                    <p class="text-6xl md:text-7xl font-black">{{ next_nfp.days_until }}</p>
                    <p class="text-white/80 font-medium">æ—¥å¾Œ</p>
                </div>
            </div>
            <div class="mt-6">
                <a href="/nfp/{{ next_nfp.month }}" class="inline-flex items-center gap-2 bg-gradient-to-r from-pop-purple to-pop-pink hover:from-pop-pink hover:to-pop-purple text-white font-bold px-6 py-3 rounded-full shadow-lg transition-all hover:scale-105">
                    è©³ç´°ã‚’ãƒã‚§ãƒƒã‚¯
                    <span>â†’</span>
                </a>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- ãƒ‰ãƒ«å††ãƒãƒ£ãƒ¼ãƒˆ (TradingView) -->
    <div class="glass-card rounded-3xl p-6 shadow-lg overflow-hidden">
        <h2 class="text-xl font-black text-gray-800 mb-4 flex items-center gap-2">
            <span class="text-2xl">ğŸ’¹</span>
            USD/JPY ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒ£ãƒ¼ãƒˆ
        </h2>
        <div class="tradingview-widget-container" style="width:800px; height:600px; margin:0 auto;">
            <div id="tradingview_usdjpy" style="height:100%; width:100%;"></div>
        </div>
    </div>

    <!-- ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ³ã‚¯ -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <a href="/nfp" class="glass-card rounded-2xl p-5 hover:shadow-lg transition-all bounce-hover group">
            <span class="text-4xl block mb-2 group-hover:scale-110 transition-transform">ğŸ“Š</span>
            <h3 class="font-bold text-gray-800">é›‡ç”¨çµ±è¨ˆ</h3>
            <p class="text-gray-500 text-sm mt-1">äºˆæƒ³ãƒ»çµæœ</p>
        </a>
        <a href="/fed-speeches" class="glass-card rounded-2xl p-5 hover:shadow-lg transition-all bounce-hover group">
            <span class="text-4xl block mb-2 group-hover:scale-110 transition-transform">ğŸ¦…</span>
            <h3 class="font-bold text-gray-800">FRBç™ºè¨€</h3>
            <p class="text-gray-500 text-sm mt-1">ã‚¿ã‚«ãƒ»ãƒãƒˆæ´¾</p>
        </a>
        <a href="/vip-quotes" class="glass-card rounded-2xl p-5 hover:shadow-lg transition-all bounce-hover group">
            <span class="text-4xl block mb-2 group-hover:scale-110 transition-transform">ğŸ©</span>
            <h3 class="font-bold text-gray-800">è¦äººç™ºè¨€</h3>
            <p class="text-gray-500 text-sm mt-1">ãƒãƒ•ã‚§ãƒƒãƒˆç­‰</p>
        </a>
        <a href="/trades" class="glass-card rounded-2xl p-5 hover:shadow-lg transition-all bounce-hover group">
            <span class="text-4xl block mb-2 group-hover:scale-110 transition-transform">ğŸ’°</span>
            <h3 class="font-bold text-gray-800">åæ”¯</h3>
            <p class="text-gray-500 text-sm mt-1">ãƒˆãƒ¬ãƒ¼ãƒ‰è¨˜éŒ²</p>
        </a>
    </div>

    <!-- ä»Šå¾Œã®ã‚¤ãƒ™ãƒ³ãƒˆ -->
    <div class="glass-card rounded-3xl p-6 shadow-lg">
        <h2 class="text-xl font-black text-gray-800 mb-4 flex items-center gap-2">
            <span class="text-2xl">ğŸ“…</span>
            ä»Šå¾Œã®ã‚¤ãƒ™ãƒ³ãƒˆ
        </h2>
        <div class="space-y-3">
            {% for event in events %}
            <div class="flex items-center gap-4 p-4 rounded-2xl hover:bg-white/50 transition-colors {% if event.date == today %}bg-pop-yellow/10 border-2 border-pop-yellow{% endif %}">
                <!-- æ—¥ä»˜ -->
                <div class="text-center min-w-[60px]">
                    <p class="text-xs text-gray-400">{{ event.date[:7] }}</p>
                    <p class="text-2xl font-black {% if event.date == today %}text-pop-yellow{% else %}text-gray-700{% endif %}">
                        {{ event.date[8:] }}
                    </p>
                    {% if event.date == today %}
                    <span class="text-xs bg-pop-yellow text-white px-2 py-0.5 rounded-full font-bold">TODAY</span>
                    {% endif %}
                </div>

                <!-- ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ± -->
                <div class="flex-1">
                    <div class="flex items-center gap-2 flex-wrap">
                        {% if event.type == 'NFP' %}
                        <span class="inline-flex items-center gap-1 px-3 py-1 rounded-full bg-gradient-to-r from-pop-purple to-pop-blue text-white text-sm font-bold">
                            ğŸ“Š é›‡ç”¨çµ±è¨ˆ
                        </span>
                        {% elif event.type == 'CPI' %}
                        <span class="inline-flex items-center gap-1 px-3 py-1 rounded-full bg-gradient-to-r from-pop-yellow to-pop-orange text-white text-sm font-bold">
                            ğŸ“ˆ CPI
                        </span>
                        {% elif event.type == 'FOMC' %}
                        <span class="inline-flex items-center gap-1 px-3 py-1 rounded-full bg-gradient-to-r from-pop-red to-pop-pink text-white text-sm font-bold">
                            ğŸ¦… FOMC
                        </span>
                        {% elif event.type == 'BOJ' %}
                        <span class="inline-flex items-center gap-1 px-3 py-1 rounded-full bg-gradient-to-r from-pop-green to-pop-cyan text-white text-sm font-bold">
                            ğŸ¯ æ—¥éŠ€
                        </span>
                        {% endif %}

                        <span class="text-gray-500 text-sm">
                            {% if event.type == 'NFP' %}
                            {{ event.month[5:] | int }}æœˆåˆ†ãƒ‡ãƒ¼ã‚¿
                            {% elif event.type == 'CPI' %}
                            {{ event.month[5:] | int }}æœˆåˆ†ãƒ‡ãƒ¼ã‚¿
                            {% elif event.type == 'FOMC' %}
                            {% if event.sep %}SEPãƒ»ãƒ‰ãƒƒãƒˆãƒ—ãƒ­ãƒƒãƒˆ{% else %}å£°æ˜ã®ã¿{% endif %}
                            {% elif event.type == 'BOJ' %}
                            {% if event.outlook %}å±•æœ›ãƒ¬ãƒãƒ¼ãƒˆ{% else %}å£°æ˜ã®ã¿{% endif %}
                            {% endif %}
                        </span>
                    </div>
                </div>

                <!-- é‡è¦åº¦ -->
                <div class="text-right">
                    {% if event.type in ['NFP', 'FOMC', 'BOJ'] %}
                    <span class="text-pop-red text-lg">â˜…â˜…â˜…</span>
                    {% else %}
                    <span class="text-pop-yellow text-lg">â˜…â˜…â˜†</span>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- æœ€æ–°ã®è¦äººç™ºè¨€ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ -->
    <div class="glass-card rounded-3xl p-6 shadow-lg">
        <div class="flex items-center justify-between mb-4">
            <h2 class="text-xl font-black text-gray-800 flex items-center gap-2">
                <span class="text-2xl">ğŸ©</span>
                æœ€æ–°ã®è¦äººç™ºè¨€
            </h2>
            <a href="/vip-quotes" class="text-pop-purple font-bold text-sm hover:underline">
                ã™ã¹ã¦è¦‹ã‚‹ â†’
            </a>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="p-4 rounded-2xl bg-gradient-to-br from-pop-blue/5 to-pop-purple/5 border border-pop-blue/20">
                <div class="flex items-center gap-3 mb-2">
                    <span class="text-3xl">ğŸ›ï¸</span>
                    <div>
                        <p class="font-bold text-gray-800">ãƒ©ãƒªãƒ¼ãƒ»ãƒ•ã‚£ãƒ³ã‚¯</p>
                        <p class="text-xs text-gray-400">2026-01-23 ãƒ€ãƒœã‚¹ä¼šè­°</p>
                    </div>
                </div>
                <p class="text-gray-600 text-sm">ã€Œã‚¤ãƒ³ãƒ•ãƒ©ã¨æ°‘é–“å¸‚å ´ã¸ã®æŠ•è³‡æ©Ÿä¼šã¯æ‹¡å¤§ã—ã¦ã„ã‚‹ã€</p>
                <span class="inline-block mt-2 text-xs px-2 py-1 rounded-full bg-pop-green/20 text-pop-green font-bold">
                    ğŸ“ˆ å¼·æ°—
                </span>
            </div>
            <div class="p-4 rounded-2xl bg-gradient-to-br from-pop-red/5 to-pop-pink/5 border border-pop-red/20">
                <div class="flex items-center gap-3 mb-2">
                    <span class="text-3xl">ğŸ¦</span>
                    <div>
                        <p class="font-bold text-gray-800">ã‚¸ã‚§ã‚¤ãƒŸãƒ¼ãƒ»ãƒ€ã‚¤ãƒ¢ãƒ³</p>
                        <p class="text-xs text-gray-400">2026-01-23 ãƒ€ãƒœã‚¹ä¼šè­°</p>
                    </div>
                </div>
                <p class="text-gray-600 text-sm">ã€Œåœ°æ”¿å­¦çš„ãƒªã‚¹ã‚¯ã¯éå°è©•ä¾¡ã•ã‚Œã¦ã„ã‚‹ã€‚ä¼æ¥­ã¯å‚™ãˆãŒå¿…è¦ã ã€</p>
                <span class="inline-block mt-2 text-xs px-2 py-1 rounded-full bg-pop-yellow/20 text-pop-yellow font-bold">
                    âš ï¸ æ…é‡å§¿å‹¢
                </span>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
<script type="text/javascript">
new TradingView.widget({
    "container_id": "tradingview_usdjpy",
    "symbol": "FX:USDJPY",
    "interval": "60",
    "timezone": "Asia/Tokyo",
    "theme": "light",
    "style": "1",
    "locale": "ja",
    "toolbar_bg": "#f1f3f6",
    "enable_publishing": false,
    "hide_top_toolbar": false,
    "save_image": false,
    "height": "100%",
    "width": "100%"
});
</script>
{% endblock %}
